<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Permissions-Policy" content="geolocation=(self https://lizyclub.netlify.app)">
    <meta name="referrer" content="no-referrer">
    <title>Live Tracking Map</title>
    <script>
        function requestLocation() {
            if (navigator.geolocation) {
                navigator.permissions.query({ name: "geolocation" }).then(function (result) {
                    if (result.state === "granted") {
                        getLocation();
                    } else if (result.state === "prompt") {
                        navigator.geolocation.getCurrentPosition(
                            (position) => {
                                getLocation(position);
                            },
                            (error) => {
                                console.error("Location access denied:", error);
                                document.getElementById("status").innerText = "Please allow location access.";
                            }
                        );
                    } else {
                        document.getElementById("status").innerText = "Location access blocked. Enable it in settings.";
                    }
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function getLocation(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            document.getElementById("status").innerText = "Location Access Granted";
            document.getElementById("mapFrame").src = `https://www.google.com/maps?q=${lat},${lng}&z=15&output=embed`;
        }
    </script>
</head>
<body onload="requestLocation()">
    <h2>Live Tracking Map</h2>
    <p id="status">Requesting Location...</p>
    <iframe id="mapFrame" width="100%" height="500px" style="border:0;" allow="geolocation"></iframe>
</body>
</html>
